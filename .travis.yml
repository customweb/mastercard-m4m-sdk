language: java
jdk:
  - oraclejdk8

dist: trusty

sudo: false

install: 
  - mvn install -P !build-extras -DskipTests=true -Dmaven.javadoc.skip=true -B -V

before_script:
  - /bin/sh ./before_script.sh

script:
  - mvn test -P !build-extras -B -e 

cache:
  directories:
    - ~/.m2/repository

after_success:
  - /bin/sh ./before_deploy.sh
  - /bin/sh ./deploy.sh

#deploy:
#  skip_cleanup: true
#  provider: script
#  script:
#    - /bin/sh ./before_deploy.sh
#    - /bin/sh ./deploy.sh
#  on:
#    tags: true
